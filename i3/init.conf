#!/bin/sh
set $m Mod4
set $default_gap 1
set $default_outer 0
# workspaces
set $web "1:"
set $term "2:"
set $game "3:"

# proper vim keys
set $up k
set $down j
set $left h
set $right l

# kill focused window
bindsym $m+d kill

# change focus
bindsym $m+$left focus left
bindsym $m+$down focus down
bindsym $m+$up focus up
bindsym $m+$right focus right
#bindsym $m+p focus parent

# move focused window
bindsym $m+Left move left
bindsym $m+Down move down
bindsym $m+Up move up
bindsym $m+Right move right

# layout
bindsym $m+equal split v
bindsym $m+Shift+equal split h
bindsym $m+minus layout toggle split
bindsym $m+Shift+minus layout toggle all
bindsym $m+space floating toggle
bindsym $m+Control+space focus mode_toggle
bindsym $m+Shift+space sticky toggle
bindsym $m+f fullscreen toggle

# scratchpad
bindsym $m+s layout stacking
bindsym $m+w layout tabbed

# switch to workspace
bindsym $m+1 workspace $web
bindsym $m+2 workspace $term
bindsym $m+3 workspace $game
bindsym $m+4 workspace 4
bindsym $m+5 workspace 5
bindsym $m+6 workspace 6
bindsym $m+7 workspace 7
bindsym $m+8 workspace 8
bindsym $m+9 workspace 9
bindsym $m+0 workspace 10
# move focused container to workspace
bindsym $m+Shift+1 move container to workspace $web
bindsym $m+Shift+2 move container to workspace $term
bindsym $m+Shift+3 move container to workspace $game
bindsym $m+Shift+4 move container to workspace 4
bindsym $m+Shift+5 move container to workspace 5
bindsym $m+Shift+6 move container to workspace 6
bindsym $m+Shift+7 move container to workspace 7
bindsym $m+Shift+8 move container to workspace 8
bindsym $m+Shift+9 move container to workspace 9
bindsym $m+Shift+0 move container to workspace 10

# assigned clients
assign [class="Firefox"] $web
assign [class="Steam"] $game
#for_window [class="Termite"] floating enable

floating_modifier $m

# screenshot
bindsym --release Print exec --no-startup-id import ~/pic/ss.png
bindsym --release $m+Print exec --no-startup-id import -window root ~/pic/ss.png
# start a terminal
bindsym $m+grave exec i3-sensible-terminal
# audio
bindsym XF86AudioRaiseVolume exec amixer -q set Master 2dB+ unmute
bindsym XF86AudioLowerVolume exec amixer -q set Master 2dB- unmute
bindsym XF86AudioMute exec amixer -q set Master toggle
# start program launcher
bindsym $m+Return exec rofi -show combi

bindsym $m+Shift+Return mode "system"
mode "system" {
  bindsym s exec --no-startup-id systemctl poweroff -i, mode "default"
	bindsym r exec --no-startup-id systemctl reboot,      mode "default"
	bindsym e exec --no-startup-id i3-msg exit,           mode "default"
	bindsym grave exec --no-startup-id i3-msg restart,    mode "default"
	bindsym c exec --no-startup-id i3-msg reload,         mode "default"
	bindsym Escape mode "default"
    bindsym Return mode "default"
}

bindsym $m+p mode "pianobarkeep"
mode "pianobarkeep" {
    bindsym p exec --no-startup-id pianobarkeep toggle, mode "default"
    bindsym P exec --no-startup-id pianobarkeep quit, mode "default"
    bindsym n exec --no-startup-id pianobarkeep next, mode "default"
    bindsym l exec --no-startup-id pianobarkeep love, mode "default"
    bindsym b exec --no-startup-id pianobarkeep ban, mode "default"
    bindsym t exec --no-startup-id pianobarkeep tired, mode "default"

    bindsym e exec --no-startup-id pianobarkeep explain, mode "default"
    bindsym i exec --no-startup-id pianobarkeep info, mode "default"
    bindsym u exec --no-startup-id pianobarkeep upcoming, mode "default"

    bindsym s exec --no-startup-id pianobarkeep switch, mode "default"
    bindsym q exec --no-startup-id pianobarkeep quickmix, mode "default"
    bindsym c exec --no-startup-id pianobarkeep new, mode "default"
    bindsym C exec --no-startup-id pianobarkeep newfrom, mode "default"
    bindsym d exec --no-startup-id pianobarkeep delete, mode "default"
    bindsym r exec --no-startup-id pianobarkeep rename, mode "default"
    bindsym a exec --no-startup-id pianobarkeep addgenre, mode "default"
    bindsym A exec --no-startup-id pianobarkeep addshared, mode "default"

    bindsym B exec --no-startup-id pianobarkeep bookmark, mode "default"
    bindsym h exec --no-startup-id pianobarkeep history, mode "default"
    bindsym f exec --no-startup-id pianobarkeep feedback, mode "default"
    bindsym S exec --no-startup-id pianobarkeep settings, mode "default"

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $m+r mode "resize"
mode "resize" {
	bindsym $left resize shrink width 10 px or 10 ppt
	bindsym $down resize grow height 10 px or 10 ppt
	bindsym $up resize shrink height 10 px or 10 ppt
	bindsym $right resize grow width 10 px or 10 ppt
	bindsym Left resize shrink width 10 px or 10 ppt
	bindsym Down resize grow height 10 px or 10 ppt
	bindsym Up resize shrink height 10 px or 10 ppt
	bindsym Right resize grow width 10 px or 10 ppt
	bindsym $m+r mode "default"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

# start on web workspace
exec --no-startup-id i3-msg workspace $web
# Background
exec --no-startup-id feh --bg-fill $HOME/pic/wall/wall --no-fehbg
# Compositor
exec_always compton -b --config $XDG_CONFIG_HOME/compton.conf
# bar
exec_always --no-startup-id $XDG_CONFIG_HOME/i3/bar.sh


